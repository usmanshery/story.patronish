(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,a){},117:function(e,t,a){},118:function(e,t){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(28),o=a.n(i),s=(a(92),a(13)),c=a(16),l=a(10),d=a(18),u=a(17),h=a(83),p=a(12),m={controls:!1,fluid:!1,fill:!0,plugins:{record:{audio:!0,video:!0,maxLength:120,debug:!0}}},g={welcome:"welcome",check:"check",question:"question",start:"start",recording:"recording",preview:"preview",playback:"playback",uploading:"uploading",thankyou:"thankyou",test:"test",null:"null"},v=(a(93),a(167)),b=a(166),w=a(164),y=a(165),f=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={questionNo:-1},n.renderQuestion=n.renderQuestion.bind(Object(l.a)(n)),n.handleNext=n.handleNext.bind(Object(l.a)(n)),n.resetOptions=n.resetOptions.bind(Object(l.a)(n)),n.markOption=n.markOption.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"handleNext",value:function(){var e=this.state.questionNo;if(e++,window.campaign.questions.length>0&&e>0&&(window.campaign.questions[e-1].answers=this.state.checked),window.campaign.questions.length!==e){var t=window.campaign.questions[e].options.length;this.setState({questionNo:e,checked:Array(t).fill(!1)})}else this.props.pahseCallback()}},{key:"resetOptions",value:function(){this.setState({checked:this.state.checked.fill(!1)})}},{key:"markOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=this.state.checked;a[e]=void 0===t||t,this.setState({checked:a})}},{key:"renderQuestion",value:function(){var e=this;if(!(this.state.questionNo<0)){var t=window.campaign.questions[this.state.questionNo],a=t.options.map((function(a,n){return"or"===t.type?r.a.createElement(v.a,{key:n,control:r.a.createElement(w.a,{checked:e.state.checked[n],onChange:function(){e.resetOptions(),e.markOption(n)}}),label:a}):r.a.createElement(v.a,{key:n,control:r.a.createElement(y.a,{checked:e.state.checked[n],onChange:function(t){e.markOption(n,t.target.checked)}}),label:a})}));return t="and"===t.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t.statement),r.a.createElement("div",{className:"checkboxGroup"},a)):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t.statement),r.a.createElement(b.a,null,a))}}},{key:"render",value:function(){var e=this.renderQuestion();return r.a.createElement("div",{className:"dialogue"},r.a.createElement("div",{className:"dialogue_text_box"},void 0===e?r.a.createElement("p",null,window.campaign.intro):e),r.a.createElement("button",{className:"button",onClick:this.handleNext},"\u2714","\u205f\u205f\u205fYES"))}}]),a}(n.Component);function k(){return r.a.createElement("div",{className:"dialogue"},r.a.createElement("div",{className:"dialogue_text_box"},r.a.createElement("p",null,"All done! Thankyou for your response.")))}var E=a(70),R=a.n(E),D={video:{facingMode:"user"}},O=function e(t,a){var n=this;Object(s.a)(this,e),this.startRecording=function(){n.setDimensions(),n.audioRecorder.start().then((function(){n.captureImagesFromCanvas()}))},this.setDimensions=function(){var e=n.sensor,t=n.viewfinder;e.width=t.width%2!==1?t.width:t.width-1,e.height=t.height%2!==1?t.height:t.height-1},this.sleep=function(e){var t=Date.now(),a=null;do{a=Date.now()}while(a-t<e)},this.stopRecording=function(){return new Promise((function(e,t){clearInterval(n.interval),n.audioRecorder.stop(),n.stream.getTracks().forEach((function(e){e.stop()})),e({rawData:{images:n.images,playbackInterval:1e3/24,audioRecorder:n.audioRecorder,videoWidth:n.viewfinder.videoWidth,videoHeight:n.viewfinder.videoHeight}})}))},this.captureImagesFromCanvas=function(){var e=n.sensor.getContext("2d");n.interval=setInterval((function(){e.drawImage(n.viewfinder,0,0,n.sensor.width,n.sensor.height);var t=n.sensor.toDataURL("image/jpeg");n.images.push({url:t})}),1e3/24)},this.sensor=document.createElement("canvas"),this.viewfinder=t,this.images=[],this.audioRecorder=null,navigator.mediaDevices.getUserMedia(D).then((function(e){n.stream=e,n.viewfinder.srcObject=e,n.audioRecorder=new R.a})).then((function(){return a()})).catch((function(e){console.error("MediaDevices failed with: ",e)}))},S=(a(35),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).requestDevice=function(){n.state.deviceReady?n.setState({phase:g.start}):n.setState({phase:g.null})},n.startRecording=function(){n.setState({status:"recording",phase:g.recording},n.capture.startRecording)},n.stopRecording=function(){n.capture.stopRecording().then(n.props.onRecordEnd)};var i=g.check;return e.phase&&(i=e.phase),n.viewfinder=r.a.createRef(),n.state={phase:i,deviceReady:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.capture=new O(this.viewfinder.current,(function(){e.onResizeWindow(),e.setState({deviceReady:!0}),e.state.phase===g.null&&(console.log("start phase set"),e.setState({phase:g.start}))})),this.setState({phase:g.check}),this.onResizeWindow=this.onResizeWindow.bind(this),window.addEventListener("resize",this.onResizeWindow)}},{key:"onResizeWindow",value:function(){var e=this.viewfinder.current;if(null!=e){var t,a;t=e.videoWidth,a=e.videoHeight;var n=window.screen.width,r=window.screen.height;if(t/a<n/r){var i=r/a,o=i*a*(i=n/(i*t)),s="width: "+n+"px; height: "+o+"px; top: "+(r-o)/2+"px;";document.getElementById("recorderDiv").style.cssText=s}else{var c=n/t,l=c*t*(c=r/(c*a)),d="width: "+l+"px; height: "+r+"px; left: "+(n-l)/2+"px;";document.getElementById("recorderDiv").style.cssText=d}}}},{key:"handleStatusUpdate",value:function(e){this.setState({status:e})}},{key:"generateCheckDialogue",value:function(){return this.state.phase!==g.check?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"dialogue"},r.a.createElement("div",{className:"dialogue_text_box"},r.a.createElement("p",null,"Check yourself and start recording when you are ready")),r.a.createElement("button",{className:"button",onClick:this.requestDevice},"\u2794\u205f\u205fNext"))}},{key:"generateStartDialogue",value:function(){return this.state.phase!==g.start?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"buttonRecord buttonMidBottom",onClick:this.startRecording},r.a.createElement("span",{role:"img","aria-label":"record"},"\u26aa"),r.a.createElement("span",{role:"img","aria-label":"space"},"\u205f"),r.a.createElement("span",{role:"img","aria-label":"space"},"\u205f"),"RECORD"))}},{key:"generateStopButton",value:function(){return this.state.phase!==g.recording?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"buttonRecord buttonMidBottom",onClick:this.stopRecording},r.a.createElement("span",{role:"img","aria-label":"stop"},"\u2b1c"),r.a.createElement("span",{role:"img","aria-label":"space"},"\u205f"),r.a.createElement("span",{role:"img","aria-label":"space"},"\u205f"),"STOP"))}},{key:"render",value:function(){var e=this.generateCheckDialogue(),t=this.generateStartDialogue(),a=this.generateStopButton();return r.a.createElement("div",{id:"containerDiv",className:"recorderContainer"},r.a.createElement("div",{id:"recorderDiv",className:"recorderDiv"},r.a.createElement("video",{id:"recorder",className:"recorderDiv recorder",width:window.innerWidth,height:window.innerHeight,muted:!0,autoPlay:!0,playsInline:!0,ref:this.viewfinder})),e,t,a)}}]),a}(n.Component)),x=a(44),N=a(45),j=a(29),C=a.n(j),P=a(32),B=(a(51),a(71)),I=a.n(B),F=a(72),T=a.n(F),W=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).playback=r.a.createRef(),e.audioRecorder=null,e.recordingDimensions=null,e.imageBlobArray=[],e.state={status:"stopped",progress:0,phase:g.preview,temp:0},e.onResizeWindow=function(){var t=document.getElementById("player");if(t){var a,n;a=e.recordingDimensions.width,n=e.recordingDimensions.height;var r=window.screen.width,i=window.screen.height;if(a/n<r/i){var o=i/n,s=o*n*(o=r/(o*a)),c="position: absolute; width: "+r+"px; height: "+s+"px; top: "+(i-s)/2+"px;";t.style.cssText=c}else{var l=r/a,d=l*a*(l=i/(l*n)),u="position: absolute; width: "+d+"px; height: "+i+"px; left: "+(r-d)/2+"px;";t.style.cssText=u}}},e.setupFirstImage=function(){var t=new Image,a=e.props.recording.rawData.images[0];console.log("total imgs recvd: ",e.props.recording.rawData.images.length);var n=e.playback.current.getContext("2d");t.onload=function(){n.drawImage(t,0,0)},t.src=a.url},e.playRecording=function(){e.setState({status:"playing"});var t=e.props.recording.rawData,a=0;e.playbackInterval=setInterval((function(){var n=e.playback.current.getContext("2d"),r=new Image,i=t.images[a];r.onload=function(){n.drawImage(r,0,0)},r.src=i.url,a>=t.images.length-1&&e.stopPlayingRecording(),a+=1}),t.playbackInterval)},e.stopPlayingRecording=function(){e.setState({status:"stopped",phase:g.preview},(function(){clearInterval(e.playbackInterval)}))},e.handlePlay=function(){e.setState({phase:g.playback}),e.audioRecorder.play(),e.playRecording()},e.handleSubmit=function(){e.setState({phase:g.uploading},(function(){return e.startSubmission()}))},e.startSubmission=function(){var t=e.props.recording.rawData.images;e.imageBlobArray=[],e.convertImagesToBlob(t,0)},e.convertImagesToBlob=function(t,a){a>=t.length?e.uploadData():I()(t[a].url,(function(n,r){n?console.log(n):(e.imageBlobArray.push(r),e.convertImagesToBlob(t,a+1))}))},e.uploadData=function(){var t;t="dev"===window.env?window.devURL+"/uploadRawVideo":window.prodURL+"/uploadRawVideo";var a=C.a.parse(window.location.search),n=new FormData;n.append("url",a.campaign),n.append("ans",JSON.stringify(window.campaign.questions)),n.append("imgcount",e.imageBlobArray.length);var r=new T.a;e.imageBlobArray.forEach((function(t,a){r.file("image".concat(a,".png"),e.imageBlobArray[a])})),r.file("audio.wav",e.props.recording.rawData.audioRecorder.getWAVBlob()),r.generateAsync({type:"blob"}).then((function(e){return n.append("data",e,"data.zip")})).then((function(){return fetch(t,{method:"POST",body:n}).then((function(e){return e.json()})).then((function(t){console.log(t.ack),e.finishUpload()}))}))},e.finishUpload=function(){e.props.updatePhase(g.thankyou)},e.resetRecording=function(){console.log("reset button called in reviewiew"),e.props.updatePhase(g.start)},e.generatePreviewButtons=function(){return e.state.phase!==g.preview?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{id:"playButton",className:"buttonPlay",onClick:e.handlePlay}),r.a.createElement("div",{className:"uploadControls"},r.a.createElement("button",{className:"buttonRetry",onClick:e.resetRecording},"\u21bb\u205f\u205fRETRY"),r.a.createElement("button",{className:"buttonSubmit",onClick:e.handleSubmit},r.a.createElement(x.a,{icon:N.a}),"\u205f\u205fSUBMIT")))},e.generateProgressBar=function(){return e.state.phase!==g.uploading?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{id:"uploadProgressDiv"},r.a.createElement(P.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",border:"0.4em solid currentColor",borderRightColor:"transparent",marginBottom:"50px"}}),r.a.createElement("h3",{id:"progText"},"uploading"))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.recording.rawData?(this.audioRecorder=this.props.recording.rawData.audioRecorder,this.recordingDimensions=this.props.recording.recordingDimensions,this.playback.current.width=window.innerWidth,this.playback.current.height=window.innerHeight,window.addEventListener("resize",this.onResizeWindow),this.onResizeWindow(),this.setupFirstImage()):this.props.updatePhase(g.start)}},{key:"componentWillUnmount",value:function(){clearInterval(this.playbackInterval)}},{key:"render",value:function(){var e=this.generatePreviewButtons(),t=this.generateProgressBar();return r.a.createElement("div",{className:"review-view"},this.state.phase!==g.uploading?r.a.createElement("canvas",{id:"player",ref:this.playback}):r.a.createElement(r.a.Fragment,null),this.state.phase!==g.uploading?r.a.createElement("audio",{ref:this.audio,style:{display:"none"},controls:!0}):r.a.createElement(r.a.Fragment,null),e,t)}}]),a}(n.Component),q=(a(115),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={phase:g.welcome},n.updatePhase=n.updatePhase.bind(Object(l.a)(n)),n.updateRecording=n.updateRecording.bind(Object(l.a)(n)),n.updatePhaseCallback=n.updatePhaseCallback.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"updatePhaseCallback",value:function(){this.updatePhase(null)}},{key:"updatePhase",value:function(e){if(e)this.setState({phase:e});else switch(this.state.phase){case g.welcome:this.setState({phase:g.check});break;case g.preview:this.setState({phase:g.thankyou});break;default:this.setState({phase:g.welcome})}}},{key:"updateRecording",value:function(e){this.setState({recording:{rawData:{images:e.rawData.images,playbackInterval:e.rawData.playbackInterval,audioRecorder:e.rawData.audioRecorder},recordingDimensions:{width:e.rawData.videoWidth,height:e.rawData.videoHeight}},phase:g.preview})}},{key:"render",value:function(){return this.state.phase===g.check||this.state.phase===g.start||this.state.phase===g.recording?r.a.createElement("div",{className:"main"},r.a.createElement(S,{onRecordEnd:this.updateRecording})):this.state.phase===g.preview||this.state.phase===g.playback?r.a.createElement("div",{className:"main"},r.a.createElement(W,{recording:this.state.recording,updatePhase:this.updatePhase})):this.state.phase===g.thankyou?r.a.createElement("div",{className:"main"},r.a.createElement(k,null)):r.a.createElement("div",{className:"main"},r.a.createElement(f,{pahseCallback:this.updatePhaseCallback}))}}]),a}(n.Component)),U=a(55),z=a.n(U),M=(a(117),a(27)),L=a(53),A=a.n(L),V=(a(134),a(135),a(138),a(139),a(140),a(81)),_=a.n(V),H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).player={},n.startPlayback=n.startPlayback.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"onPlayerReady",value:function(e){console.log("Player is ready: ",e),this.player=e}},{key:"onVideoPlay",value:function(e){console.log("Video played at: ",e)}},{key:"onVideoEnd",value:function(){document.getElementById("playButton").style.display="block"}},{key:"startPlayback",value:function(){document.getElementById("playButton").style.display="none",this.player.play()}},{key:"render",value:function(){return null==this.props.src||this.props.phase===g.uploading||this.props.phase===g.thankyou?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{id:"playButton",className:"buttonPlay",onClick:this.startPlayback}),r.a.createElement("div",{className:"player"},r.a.createElement(_.a,{className:"player",controls:!1,src:{src:window.URL.createObjectURL(this.props.src),type:"video/mp4"},onReady:this.onPlayerReady.bind(this),onPlay:this.onVideoPlay.bind(this),onEnd:this.onVideoEnd.bind(this)})))}}]),a}(n.Component),J=a(82),Q=a.n(J),Y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={phase:g.start,deviceReady:!1,src:null},n.requestDevice=n.requestDevice.bind(Object(l.a)(n)),n.startRecording=n.startRecording.bind(Object(l.a)(n)),n.stopRecording=n.stopRecording.bind(Object(l.a)(n)),n.startPlayback=n.startPlayback.bind(Object(l.a)(n)),n.resetRecording=n.resetRecording.bind(Object(l.a)(n)),n.playbackFinished=n.playbackFinished.bind(Object(l.a)(n)),n.submitRecording=n.submitRecording.bind(Object(l.a)(n)),n.onResizeWindow=n.onResizeWindow.bind(Object(l.a)(n)),n.cleanup=n.cleanup.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.onResizeWindow);var t=Object(M.default)(this.recorderNode,m,(function(){var e="Using video.js "+M.default.VERSION+" with videojs-record "+M.default.getPluginVersion("record")+" and recordrtc "+A.a.version;M.default.log(e),t.record().getDevice()}));t.on("deviceReady",(function(){console.log("device is ready!"),e.setState({deviceReady:!0,videoSize:{width:e.state.recorder.videoWidth(),height:e.state.recorder.videoHeight()}}),e.state.phase===g.null&&e.setState({phase:g.start});var a=t.videoWidth(),n=t.videoHeight(),r=window.screen.width,i=window.screen.height;if(a/n<r/i){var o=i/n,s=r,c=o*n*(o=r/(o*a)),l=(i-c)/2,d=document.getElementById("recorderDiv"),u="width: "+s+"px; height: "+c+"px; top: "+l+"px; overflow: hidden;";console.log(u),d.style.cssText=u}else{var h=r/a,p=h*a*(h=i/(h*n)),m=i,v=(r-p)/2,b=document.getElementById("recorderDiv"),w="width: "+p+"px; height: "+m+"px; left: "+v+"px;";console.log(w),b.style.cssText=w}})),t.on("startRecord",(function(){console.log("started recording!")})),t.on("finishRecord",(function(){console.log("finished recording: ",t.recordedData),document.getElementById("recorder").style.display="none",e.setState({src:t.recordedData})})),t.on("error",(function(e,t){console.warn(t)})),t.on("deviceError",(function(){console.error("device error:",e.recorder.deviceErrorCode)})),this.setState({recorder:t})}},{key:"onResizeWindow",value:function(){if(this.state.recorder&&this.state.phase!==g.uploading&&this.state.phase!==g.thankyou){var e=this.state.recorder.videoWidth(),t=this.state.recorder.videoHeight(),a=window.screen.width,n=window.screen.height;if(e/t<a/n){var r=n/t,i=a,o=r*t*(r=a/(r*e)),s=(n-o)/2,c=document.getElementById("recorderDiv"),l="width: "+i+"px; height: "+o+"px; top: "+s+"px;";console.log(l),c.style.cssText=l}else{var d=a/e,u=d*e*(d=n/(d*t)),h=n,p=(a-u)/2,m=document.getElementById("recorderDiv"),v="width: "+u+"px; height: "+h+"px; left: "+p+"px;";console.log(v),m.style.cssText=v}}}},{key:"componentWillUnmount",value:function(){this.state.recorder&&this.state.recorder.dispose()}},{key:"requestDevice",value:function(){this.state.deviceReady?this.setState({phase:g.start}):this.setState({phase:g.null})}},{key:"startRecording",value:function(){if(!this.state.recorder.record().isRecording()){this.state.recorder.record().start();var e=Date.now();this.setState({phase:g.recording,recStartTimestamp:e})}}},{key:"stopRecording",value:function(){if(this.state.recorder.record().isRecording()){this.state.recorder.record().stop();var e=Date.now();this.setState({phase:g.preview,recEndTimestamp:e})}}},{key:"startPlayback",value:function(){}},{key:"playbackFinished",value:function(){}},{key:"resetRecording",value:function(){document.getElementById("recorder").style.display="block",this.setState({src:null,phase:g.start})}},{key:"submitRecording",value:function(){var e=this;this.setState({phase:g.uploading}),document.getElementById("recorder").style.display="none";var t=this.state.src,a=(new Date).getTime().toString();t=new File([t],a);var n,r=C.a.parse(window.location.search),i=Math.floor((this.state.recEndTimestamp-this.state.recStartTimestamp)/1e3),o=this.state.videoSize,s=new FormData;s.append("upl",t,"video.mp4"),s.append("ans",JSON.stringify(window.campaign.questions)),s.append("url",r.campaign),s.append("dur",i),s.append("res",JSON.stringify(o)),n="dev"===window.env?window.devURL+"/uploadVideo":window.prodURL+"/uploadVideo",fetch(n,{method:"POST",body:s}).then((function(e){return e.json()})).then((function(t){t.err?console.log(t.err):(console.log(t.ack),e.cleanup())}))}},{key:"cleanup",value:function(){this.state.recorder.dispose(),this.setState({phase:g.thankyou})}},{key:"generateCheckDialogue",value:function(){return this.state.phase!==g.check?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"dialogue"},r.a.createElement("div",{className:"dialogue_text_box"},r.a.createElement("p",null,"Check yourself and start recording when you are ready")),r.a.createElement("button",{className:"button",onClick:this.requestDevice},"\u2794\u205f\u205fNext"))}},{key:"generateStartDialogue",value:function(){return this.state.phase!==g.start?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"dialogue"},r.a.createElement("div",{className:"dialogue_text_box"},r.a.createElement("p",null,"Check yourself and start recording when you are ready"))),r.a.createElement("button",{className:"buttonRecord buttonMidBottom",onClick:this.startRecording},r.a.createElement("span",{role:"img","aria-label":"record"},"\u26aa"),r.a.createElement("span",{role:"img","aria-label":"space"},"\u205f"),r.a.createElement("span",{role:"img","aria-label":"space"},"\u205f"),"RECORD"))}},{key:"generateStopButton",value:function(){return this.state.phase!==g.recording?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"buttonRecord buttonMidBottom",onClick:this.stopRecording},r.a.createElement("span",{role:"img","aria-label":"stop"},"\u2b1c"),r.a.createElement("span",{role:"img","aria-label":"space"},"\u205f"),r.a.createElement("span",{role:"img","aria-label":"space"},"\u205f"),"STOP"))}},{key:"generatePreviewButtons",value:function(){return this.state.phase!==g.preview?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"uploadControls"},r.a.createElement("button",{className:"buttonRetry",onClick:this.resetRecording},"\u21bb\u205f\u205fRETRY"),r.a.createElement("button",{className:"buttonSubmit",onClick:this.submitRecording},r.a.createElement(x.a,{icon:N.a}),"\u205f\u205fSUBMIT")))}},{key:"generateProgressBar",value:function(){return this.state.phase!==g.uploading?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{id:"uploadProgressDiv"},r.a.createElement(P.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",border:"0.4em solid currentColor",borderRightColor:"transparent","margin-bottom":"50px"}}),r.a.createElement("h3",{id:"progText"},"uploading"))}},{key:"generateThankyouDialogue",value:function(){return this.state.phase!==g.thankyou?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"dialogue"},r.a.createElement("div",{className:"dialogue_text_box"},r.a.createElement("p",null,"All done! Thankyou for your response.")))}},{key:"render",value:function(){var e=this,t=this.generateStartDialogue(),a=this.generateStopButton(),n=this.generatePreviewButtons(),i=this.generateProgressBar(),o=this.generateThankyouDialogue();return r.a.createElement("div",{id:"containerDiv",className:"recorderContainer"},r.a.createElement("div",{className:"recorderDiv",id:"recorderDiv"},r.a.createElement(Q.a,{fonts:[{font:"Quicksand",weights:[400]}]}),r.a.createElement("video",{id:"recorder",ref:function(t){return e.recorderNode=t},className:"video-js vjs-default-skin recorder",playsInline:!0}),r.a.createElement(H,{src:this.state.src,phase:this.state.phase})),t,a,n,i,o)}}]),a}(n.Component),G=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).updatePhase=function(e){var t=void 0;if(e&&(t=e.phase),t)n.setState({phase:t});else switch(n.state.phase){case g.welcome:n.setState({phase:g.start});break;case g.preview:n.setState({phase:g.thankyou});break;default:n.setState({phase:g.welcome})}},n.state={phase:g.welcome},n}return Object(c.a)(a,[{key:"render",value:function(){return this.state.phase===g.start||this.state.phase===g.recording||this.state.phase===g.preview||this.state.phase===g.playback?r.a.createElement("div",{className:"main"},r.a.createElement(Y,{pahseCallback:this.updatePhase})):this.state.phase===g.thankyou?r.a.createElement("div",{className:"main"},r.a.createElement(k,null)):r.a.createElement("div",{className:"main"},r.a.createElement(f,{pahseCallback:this.updatePhase}))}}]),a}(n.Component),$=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={validating:!0,valid:!1},n.validationCB=n.validationCB.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=C.a.parse(window.location.search);if(e.campaign){var t;"dev"===window.env?(t=window.devURL+"/campaign/",console.log("developmental build ")):t=window.prodURL+"/campaign/";var a=t+e.campaign;fetch(a,{method:"GET"}).then((function(e){return e.json()})).then(this.validationCB)}else this.setState({validating:!1,valid:!1,msg:"Invalid Campaign URL"})}},{key:"validationCB",value:function(e){e.success?(window.campaign=e.campaign,this.setState({validating:!1,valid:!0})):this.setState({validating:!1,valid:!1,msg:e.msg})}},{key:"render",value:function(){return this.state.validating?r.a.createElement("div",{className:"loading"},r.a.createElement(P.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",border:"0.4em solid currentColor",borderRightColor:"transparent"}})):this.state.valid?r.a.createElement(h.a,null,"Safari"===z.a.name?r.a.createElement(p.a,{path:"/",component:q}):r.a.createElement(p.a,{path:"/",component:G}),(function(){return console.log("platform "+z.a.name)})):r.a.createElement("div",{className:"loading-failed"},r.a.createElement("h1",null,this.state.msg))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},35:function(e,t,a){},87:function(e,t,a){e.exports=a(142)},92:function(e,t,a){},93:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.17c5adc5.chunk.js.map